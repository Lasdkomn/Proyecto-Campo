<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Piscina Florangel | Admin</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
</head>
<body>

    <div class="background-glow"></div>

    <button id="themeToggle" class="theme-btn">
        <span class="material-icons-round">light_mode</span>
    </button>

    <main class="main-container">
        
        <section id="hero" class="full-screen">
            <div class="hero-content">
                <div class="badge">Administraci√≥n</div>
                <h1>Piscina <span class="gradient-text">Florangel</span></h1>
                <p>Gesti√≥n inteligente de reservas y finanzas.</p>
            </div>
            <button class="nav-arrow bottom" onclick="goToSection('calendar-section')">
                <span class="material-icons-round">expand_more</span>
            </button>
        </section>

        <section id="calendar-section" class="full-screen">
            <button class="nav-arrow top" onclick="goToSection('hero')">
                <span class="material-icons-round">expand_less</span>
            </button>
            <div class="glass-card">
                <div class="card-header">
                    <h2>Calendario</h2>
                    <div class="calendar-controls">
                        <button id="prevMonth" class="icon-btn"><span class="material-icons-round">chevron_left</span></button>
                        <h3 id="monthYear"></h3>
                        <button id="nextMonth" class="icon-btn"><span class="material-icons-round">chevron_right</span></button>
                    </div>
                </div>
                <div class="weekdays">
                    <div>Lu</div><div>Ma</div><div>Mi</div><div>Ju</div><div>Vi</div><div>Sa</div><div>Do</div>
                </div>
                <div class="calendar-grid" id="calendar"></div>
            </div>
            <button class="nav-arrow bottom" onclick="goToSection('history-section')">
                <span class="material-icons-round">expand_more</span>
            </button>
        </section>

        <section id="history-section" class="full-screen">
            <button class="nav-arrow top" onclick="goToSection('calendar-section')">
                <span class="material-icons-round">expand_less</span>
            </button>
            <div class="glass-card full-height-card">
                <h2>Historial</h2>
                <div class="filters-container">
                    <div class="input-wrapper" id="searchWrapper" style="display: none;">
                        <span class="material-icons-round icon">search</span>
                        <input type="text" id="searchInput" placeholder="Nombre...">
                    </div>
                    <select id="statusFilter" class="custom-select">
                        <option value="all">üìÖ Fecha creaci√≥n</option>
                        <option value="paid">‚úÖ Listas</option>
                        <option value="pending">‚è≥ Espera</option>
                        <option value="name">üîç Buscar</option>
                    </select>
                </div>
                <p class="drag-hint"><small>Manten presionado para mover</small></p>
                <ul id="historyList" class="scroll-list"></ul>
            </div>
            <button class="nav-arrow bottom" onclick="goToSection('dashboard-section')">
                <span class="material-icons-round">expand_more</span>
            </button>
        </section>

        <section id="dashboard-section" class="full-screen">
            <button class="nav-arrow top" onclick="goToSection('history-section')">
                <span class="material-icons-round">expand_less</span>
            </button>
            <div class="glass-card full-height-card dashboard-card">
                <div class="card-header">
                    <h2>Estad√≠sticas</h2>
                    <select id="yearFilter" class="mini-select"></select>
                </div>
                <div class="kpi-grid">
                    <div class="kpi-card"><small>Este Mes</small><p id="monthIncome">$0</p></div>
                    <div class="kpi-card"><small>A√±o Seleccionado</small><p id="yearIncome">$0</p></div>
                    <div class="kpi-card highlight"><small>Total Hist√≥rico</small><p id="totalIncome">$0</p></div>
                </div>
                <div class="charts-wrapper">
                    <div class="chart-container">
                        <canvas id="barChart"></canvas>
                    </div>
                </div>
            </div>
            <button class="nav-arrow bottom" onclick="goToSection('expenses-section')">
                <span class="material-icons-round">expand_more</span>
            </button>
        </section>

        <section id="expenses-section" class="full-screen">
            <button class="nav-arrow top" onclick="goToSection('dashboard-section')">
                <span class="material-icons-round">expand_less</span>
            </button>
            <div class="glass-card full-height-card">
                <h2>Finanzas</h2>
                <div class="finance-grid">
                    <div class="fin-card profit" onclick="toggleCard(this)">
                        <span class="material-icons-round">savings</span>
                        <div>
                            <small class="fin-title">Ganancia Real</small>
                            <p id="realProfit">$0</p>
                            <small class="fin-desc">(Dinero - Gastos)</small>
                        </div>
                    </div>
                    <div class="fin-card income" onclick="toggleCard(this)">
                        <span class="material-icons-round">payments</span>
                        <div>
                            <small class="fin-title">Total Dinero</small>
                            <p id="grossIncome">$0</p>
                            <small class="fin-desc">(Ingresos Brutos)</small>
                        </div>
                    </div>
                    <div class="fin-card expense" onclick="toggleCard(this)">
                        <span class="material-icons-round">trending_down</span>
                        <div>
                            <small class="fin-title">Total Gastos</small>
                            <p id="totalExpenses">$0</p>
                            <small class="fin-desc">(Salidas Registradas)</small>
                        </div>
                    </div>
                    <div class="fin-card movement" onclick="toggleCard(this)">
                        <span class="material-icons-round">currency_exchange</span>
                        <div>
                            <small class="fin-title">Movimiento Total</small>
                            <p id="totalMovement">$0</p>
                            <small class="fin-desc">(Ingresos + Gastos)</small>
                        </div>
                    </div>
                </div>
                <button class="btn-action" onclick="openExpenseModal()">
                    <span class="material-icons-round">add</span> Nuevo Gasto
                </button>
                <ul id="expensesList" class="scroll-list compact"></ul>
            </div>
        </section>

    </main>

    <div id="reservationModal" class="modal-backdrop">
        <div class="modal-panel">
            <div class="modal-header">
                <h3>Reserva</h3>
                <span class="close-btn" onclick="closeModalFunc('reservationModal')">&times;</span>
            </div>
            <form id="reservationForm">
                <input type="hidden" id="selectedDate">
                <input type="hidden" id="customOrder"> <div class="toggle-container">
                    <label class="switch"><input type="checkbox" id="status"><span class="slider round"></span></label>
                    <span id="statusText">Pendiente</span>
                </div>
                <div class="input-group"><label>Cliente</label><input type="text" id="name" required placeholder="Nombre completo"></div>
                <div class="input-row">
                    <div class="input-group"><label>Tel√©fono</label><input type="tel" id="phone" placeholder="9 1234 5678"></div>
                    <div class="input-group"><label>Precio ($)</label><input type="number" id="price" placeholder="0"></div>
                </div>
                <div class="input-row">
                    <div class="input-group"><label>Personas</label><input type="number" id="people" placeholder="0"></div>
                    <div class="input-group"><label>Hora</label><input type="time" id="time"></div>
                </div>
                <div class="modal-actions">
                    <button type="button" id="btnDelete" class="btn-secondary">Eliminar</button>
                    <button type="submit" class="btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="expenseModal" class="modal-backdrop">
        <div class="modal-panel">
            <div class="modal-header"><h3>Registrar Gasto</h3><span class="close-btn" onclick="closeModalFunc('expenseModal')">&times;</span></div>
            <form id="expenseForm">
                <input type="hidden" id="expenseId">
                <div class="input-group"><label>Concepto</label><input type="text" id="expenseName" required placeholder="Ej: Cloro..."></div>
                <div class="input-group"><label>Monto ($)</label><input type="number" id="expenseAmount" required placeholder="0"></div>
                <p class="helper-text">üìÖ Fecha autom√°tica: Hoy</p>
                <div class="modal-actions">
                    <button type="button" id="btnDeleteExpense" class="btn-secondary" style="display:none;">Eliminar</button>
                    <button type="submit" class="btn-primary danger">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>
